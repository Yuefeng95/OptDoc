# MPS 多进程服务

[nvidia mps doc](https://docs.nvidia.com/deploy/mps/index.html)

## 什么是MPS

**多进程服务** （MultiProcessService） 是 CUDA 应用程序编程接口 （API） 的替代、二进制兼容的实现。MPS 运行时架构旨在透明地支持协作式多进程 CUDA 应用程序（通常是 MPI 作业），以利用最新 NVIDIA（基于开普勒）GPU 上的 Hyper-Q 功能。Hyper-Q允许在同一GPU上同时处理CUDA内核;当单个应用程序进程未充分利用 GPU 计算容量时，这可以提高性能。

他由多个组件组成

- 控制守护进程 – 控制守护程序负责启动和停止服务器，以及协调客户端和服务器之间的连接。
- 客户端运行时 – MPS 客户端运行时内置于 CUDA 驱动程序库中，可由任何 CUDA 应用程序透明地使用。
- 服务器进程 – 服务器是客户端与 GPU 的共享连接，并在客户端之间提供并发性。

## Volta中的MPS（重点）

Volta 架构引入了新的 MPS 功能。与 Volta GPU 之前的 MPS 相比，Volta MPS 提供了一些关键改进：

- Volta MPS 客户端将工作直接提交到 GPU，而无需通过 MPS 服务器。
- 每个 Volta MPS 客户端都拥有自己的 GPU 地址空间，而不是与所有其他 MPS 客户端共享 GPU 地址空间。
- Volta MPS 支持针对服务质量 （QoS） 的有限执行资源配置。

#### Volta MPS 和 MPS 在 Volta GPU 之前的版本中的差异

<img src="https://raw.githubusercontent.com/Yuefeng95/Images/main/img/202201301416445.png" height="300px" />